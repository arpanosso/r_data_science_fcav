<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Manipulação de dados com o dplyr | Análise de Dados de Ciência do Solo no R</title>
  <meta name="description" content="Disciplina ministrada no primeiro semestre de 2021 no curso de Pós-graduação em Agronomia (Ciência do Solo) da Faculdade de Ciências Agrárias e Veterinarias (FCAV) da UNESP de Jaboticabal." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Manipulação de dados com o dplyr | Análise de Dados de Ciência do Solo no R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Disciplina ministrada no primeiro semestre de 2021 no curso de Pós-graduação em Agronomia (Ciência do Solo) da Faculdade de Ciências Agrárias e Veterinarias (FCAV) da UNESP de Jaboticabal." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Manipulação de dados com o dplyr | Análise de Dados de Ciência do Solo no R" />
  
  <meta name="twitter:description" content="Disciplina ministrada no primeiro semestre de 2021 no curso de Pós-graduação em Agronomia (Ciência do Solo) da Faculdade de Ciências Agrárias e Veterinarias (FCAV) da UNESP de Jaboticabal." />
  

<meta name="author" content="Alan R. Panosso alan.panosso@unesp.br &amp; Gener T. Pereira gener.t.pereira@unesp.br" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualização-de-dados-com-o-ggplot2.html"/>
<link rel="next" href="análise-exploratória-de-dados-aed.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Science no R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Bem-vindos!!</a></li>
<li class="chapter" data-level="1" data-path="ambientação.html"><a href="ambientação.html"><i class="fa fa-check"></i><b>1</b> Ambientação</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ambientação.html"><a href="ambientação.html#instalando-o-r"><i class="fa fa-check"></i><b>1.1</b> Instalando o R</a></li>
<li class="chapter" data-level="1.2" data-path="ambientação.html"><a href="ambientação.html#instalando-o-rstudio"><i class="fa fa-check"></i><b>1.2</b> Instalando o RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="pacotes-no-r.html"><a href="pacotes-no-r.html"><i class="fa fa-check"></i><b>2</b> Pacotes no R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pacotes-no-r.html"><a href="pacotes-no-r.html#pacotes-básicos"><i class="fa fa-check"></i><b>2.1</b> Pacotes básicos</a></li>
<li class="chapter" data-level="2.2" data-path="pacotes-no-r.html"><a href="pacotes-no-r.html#instalando-pacotes"><i class="fa fa-check"></i><b>2.2</b> Instalando pacotes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lógica-de-programação.html"><a href="lógica-de-programação.html"><i class="fa fa-check"></i><b>3</b> Lógica de Programação</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lógica-de-programação.html"><a href="lógica-de-programação.html#introdução"><i class="fa fa-check"></i><b>3.1</b> Introdução</a></li>
<li class="chapter" data-level="3.2" data-path="lógica-de-programação.html"><a href="lógica-de-programação.html#conceitos-básicos"><i class="fa fa-check"></i><b>3.2</b> Conceitos básicos</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html"><i class="fa fa-check"></i><b>4</b> Introdução à Ciência dos Dados</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#importação"><i class="fa fa-check"></i><b>4.1</b> Importação</a></li>
<li class="chapter" data-level="4.2" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#organização"><i class="fa fa-check"></i><b>4.2</b> Organização</a></li>
<li class="chapter" data-level="4.3" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#transformação-dos-dados"><i class="fa fa-check"></i><b>4.3</b> Transformação dos dados</a></li>
<li class="chapter" data-level="4.4" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#visualização"><i class="fa fa-check"></i><b>4.4</b> Visualização</a></li>
<li class="chapter" data-level="4.5" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#modelação"><i class="fa fa-check"></i><b>4.5</b> Modelação</a></li>
<li class="chapter" data-level="4.6" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#comunicação"><i class="fa fa-check"></i><b>4.6</b> Comunicação</a></li>
<li class="chapter" data-level="4.7" data-path="introdução-à-ciência-dos-dados.html"><a href="introdução-à-ciência-dos-dados.html#programação"><i class="fa fa-check"></i><b>4.7</b> Programação</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html"><i class="fa fa-check"></i><b>5</b> Tópicos iniciais</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#identificadores"><i class="fa fa-check"></i><b>5.1</b> Identificadores</a></li>
<li class="chapter" data-level="5.2" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#palavras-reservadas"><i class="fa fa-check"></i><b>5.2</b> Palavras Reservadas</a></li>
<li class="chapter" data-level="5.3" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#regras-para-os-nomes-de-identificadores"><i class="fa fa-check"></i><b>5.3</b> Regras para os nomes de Identificadores</a></li>
<li class="chapter" data-level="5.4" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#tipos-de-dados"><i class="fa fa-check"></i><b>5.4</b> Tipos de dados</a></li>
<li class="chapter" data-level="5.5" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#atribuição"><i class="fa fa-check"></i><b>5.5</b> Atribuição</a></li>
<li class="chapter" data-level="5.6" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#operadores"><i class="fa fa-check"></i><b>5.6</b> Operadores</a></li>
<li class="chapter" data-level="5.7" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#operação-aritmética"><i class="fa fa-check"></i><b>5.7</b> Operação aritmética</a></li>
<li class="chapter" data-level="5.8" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#funções-matemáticas-e-trigonométricas"><i class="fa fa-check"></i><b>5.8</b> Funções matemáticas e trigonométricas</a></li>
<li class="chapter" data-level="5.9" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#operações-relacionais"><i class="fa fa-check"></i><b>5.9</b> Operações Relacionais</a></li>
<li class="chapter" data-level="5.10" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#operações-lógicas"><i class="fa fa-check"></i><b>5.10</b> Operações Lógicas</a></li>
<li class="chapter" data-level="5.11" data-path="tópicos-iniciais.html"><a href="tópicos-iniciais.html#exercícios"><i class="fa fa-check"></i><b>5.11</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="algoritmos.html"><a href="algoritmos.html"><i class="fa fa-check"></i><b>6</b> Algoritmos</a>
<ul>
<li class="chapter" data-level="6.1" data-path="algoritmos.html"><a href="algoritmos.html#estruturas-de-controle"><i class="fa fa-check"></i><b>6.1</b> Estruturas de Controle</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="algoritmos.html"><a href="algoritmos.html#sequêncial"><i class="fa fa-check"></i><b>6.1.1</b> Sequêncial</a></li>
<li class="chapter" data-level="6.1.2" data-path="algoritmos.html"><a href="algoritmos.html#seleção"><i class="fa fa-check"></i><b>6.1.2</b> Seleção</a></li>
<li class="chapter" data-level="6.1.3" data-path="algoritmos.html"><a href="algoritmos.html#repetição"><i class="fa fa-check"></i><b>6.1.3</b> Repetição</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="algoritmos.html"><a href="algoritmos.html#exercícios-1"><i class="fa fa-check"></i><b>6.2</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html"><i class="fa fa-check"></i><b>7</b> Estrutura de dados</a>
<ul>
<li class="chapter" data-level="7.1" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html#atomic-vector"><i class="fa fa-check"></i><b>7.1</b> Atomic vector</a></li>
<li class="chapter" data-level="7.2" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html#factor"><i class="fa fa-check"></i><b>7.2</b> Factor</a></li>
<li class="chapter" data-level="7.3" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html#matrizes-e-arrays"><i class="fa fa-check"></i><b>7.3</b> Matrizes e Arrays</a></li>
<li class="chapter" data-level="7.4" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html#listas"><i class="fa fa-check"></i><b>7.4</b> Listas</a></li>
<li class="chapter" data-level="7.5" data-path="estrutura-de-dados.html"><a href="estrutura-de-dados.html#data-frames"><i class="fa fa-check"></i><b>7.5</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Visualização de dados com o ggplot2</a>
<ul>
<li class="chapter" data-level="8.1" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#criando-um-gráfico"><i class="fa fa-check"></i><b>8.1</b> Criando um gráfico</a></li>
<li class="chapter" data-level="8.2" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#definindo-temas"><i class="fa fa-check"></i><b>8.2</b> Definindo temas</a></li>
<li class="chapter" data-level="8.3" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#controle-de-elementos-do-tema"><i class="fa fa-check"></i><b>8.3</b> Controle de elementos do tema</a></li>
<li class="chapter" data-level="8.4" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#mapeando-estéticos"><i class="fa fa-check"></i><b>8.4</b> Mapeando estéticos</a></li>
<li class="chapter" data-level="8.5" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#facetas"><i class="fa fa-check"></i><b>8.5</b> Facetas</a></li>
<li class="chapter" data-level="8.6" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#objetos-geométricos"><i class="fa fa-check"></i><b>8.6</b> Objetos geométricos</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#gráfico-de-colunas"><i class="fa fa-check"></i><b>8.6.1</b> Gráfico de Colunas</a></li>
<li class="chapter" data-level="8.6.2" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#gráfico-de-barras"><i class="fa fa-check"></i><b>8.6.2</b> Gráfico de Barras</a></li>
<li class="chapter" data-level="8.6.3" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#smoothers"><i class="fa fa-check"></i><b>8.6.3</b> Smoothers</a></li>
<li class="chapter" data-level="8.6.4" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#boxplot"><i class="fa fa-check"></i><b>8.6.4</b> Boxplot</a></li>
<li class="chapter" data-level="8.6.5" data-path="visualização-de-dados-com-o-ggplot2.html"><a href="visualização-de-dados-com-o-ggplot2.html#histograma"><i class="fa fa-check"></i><b>8.6.5</b> Histograma</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html"><i class="fa fa-check"></i><b>9</b> Manipulação de dados com o dplyr</a>
<ul>
<li class="chapter" data-level="9.1" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#principais-funções-verbos-do-dplyr."><i class="fa fa-check"></i><b>9.1</b> Principais funções (verbos) do <code>dplyr</code>.</a></li>
<li class="chapter" data-level="9.2" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#regras-para-manipulação"><i class="fa fa-check"></i><b>9.2</b> Regras para manipulação:</a></li>
<li class="chapter" data-level="9.3" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#filter"><i class="fa fa-check"></i><b>9.3</b> filter()</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#valores-faltantes"><i class="fa fa-check"></i><b>9.3.1</b> Valores Faltantes</a></li>
<li class="chapter" data-level="9.3.2" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#strings-e-regex"><i class="fa fa-check"></i><b>9.3.2</b> Strings e Regex</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#arrange"><i class="fa fa-check"></i><b>9.4</b> arrange()</a></li>
<li class="chapter" data-level="9.5" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#select"><i class="fa fa-check"></i><b>9.5</b> select()</a></li>
<li class="chapter" data-level="9.6" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#mutate"><i class="fa fa-check"></i><b>9.6</b> mutate()</a></li>
<li class="chapter" data-level="9.7" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#resumos-agrupados-com-summarize"><i class="fa fa-check"></i><b>9.7</b> Resumos Agrupados com summarize()</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#valores-faltantes-1"><i class="fa fa-check"></i><b>9.7.1</b> Valores faltantes</a></li>
<li class="chapter" data-level="9.7.2" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#counts"><i class="fa fa-check"></i><b>9.7.2</b> Counts</a></li>
<li class="chapter" data-level="9.7.3" data-path="manipulação-de-dados-com-o-dplyr.html"><a href="manipulação-de-dados-com-o-dplyr.html#algumas-funções-de-resumo"><i class="fa fa-check"></i><b>9.7.3</b> Algumas funções de resumo</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="análise-exploratória-de-dados-aed.html"><a href="análise-exploratória-de-dados-aed.html"><i class="fa fa-check"></i><b>10</b> Análise Exploratória de Dados (AED)</a>
<ul>
<li class="chapter" data-level="10.1" data-path="análise-exploratória-de-dados-aed.html"><a href="análise-exploratória-de-dados-aed.html#descrevendo-os-dados-amostrais"><i class="fa fa-check"></i><b>10.1</b> Descrevendo os dados amostrais</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html"><i class="fa fa-check"></i>Referências</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análise de Dados de Ciência do Solo no R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulação-de-dados-com-o-dplyr" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Manipulação de dados com o dplyr</h1>
<p>A visualização de dados é uma ferramenta importante para a geração de <em>insights</em>, mas é raro que tenhamos os dados exatamente na forma necessário para essa tarefa. Muitas vezes precisamos realizar recortes no banco de dados, selecionar certas observações, criar novas variáveis, transformá-la, renomeá-las, reordenar observações entre outras manipulações.</p>
<p>Para a manipulação dos nossos dados, vamos utilizar o pacote <code>dplyr</code>, que é um pacote específico para a manipulação de dados, unido ao pacote <code>ggplot2</code> é um poderoso recurso para exploração, transformação e visualização de dados. Ambos os pacotes fazem parte do <code>tidyverse</code>, que, como já dito, é um pacote de pacotes.</p>
<div id="principais-funções-verbos-do-dplyr." class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Principais funções (verbos) do <code>dplyr</code>.</h2>
<ul>
<li><code>filter()</code>: seleciona/filtra por linhas (observações) a base de dados.<br />
</li>
<li><code>arrange()</code>: ordena a base de dados de acordo com alguma coluna (variável).<br />
</li>
<li><code>select()</code>: seleciona colunas (variáveis).<br />
</li>
<li><code>mutate()</code>: modifica/transforma/cria variáveis (colunas).<br />
</li>
<li><code>summarise()</code>: resume/agrega, variáveis (colunas) de uma base de dados.</li>
</ul>
</div>
<div id="regras-para-manipulação" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Regras para manipulação:</h2>
<p>1- O primeiro argumento sempre será um <code>data.frame</code>.<br />
2- Demais argumentos, descrevem como deve ser a manipulação.<br />
3- A resposta (retorno) sempre será um <code>data.frame</code>.<br />
4- Manipulação é realizada com o operador “PIPE” (<code>%&gt;%</code>) - <code>CTRL SHIFT + M</code>.</p>
<p><strong>Importação dos dados</strong></p>
<p>Vamos realizar a importação, via web, do banco de dados <a href="https://raw.githubusercontent.com/arpanosso/r_data_science_fcav/master/dados/geomorfologia.txt">geomorfologia.txt</a>.</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb282-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb282-2" aria-hidden="true" tabindex="-1"></a>URL <span class="ot">&lt;-</span> <span class="st">&quot;https://raw.githubusercontent.com/arpanosso/r_data_science_fcav/master/dados/geomorfologia.txt&quot;</span></span>
<span id="cb282-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb282-3" aria-hidden="true" tabindex="-1"></a>geomorfologia<span class="ot">&lt;-</span><span class="fu">read.table</span>(URL,<span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb282-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb282-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(geomorfologia)</span></code></pre></div>
<pre><code>## Rows: 106
## Columns: 22
## $ SUP     &lt;chr&gt; &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;, &quot;I&quot;,...
## $ Solo    &lt;chr&gt; &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;, &quot;LV&quot;,...
## $ Amostra &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, ...
## $ X       &lt;int&gt; 0, 25, 50, 75, 100, 125, 150, 175, 200, 225, 250, 275, 300,...
## $ AMG     &lt;dbl&gt; 0.2, 0.1, 0.7, 0.4, 0.4, 0.4, 1.2, 0.8, 1.1, 1.2, 0.1, 0.2,...
## $ AG      &lt;dbl&gt; 3.72, 4.27, 5.00, 3.80, 3.10, 3.80, 3.60, 4.70, 4.50, 5.90,...
## $ AM      &lt;dbl&gt; 20.4, 22.6, 22.7, 23.7, 22.3, 23.8, 23.1, 25.8, 25.5, 32.8,...
## $ AF      &lt;dbl&gt; 22.9, 23.6, 22.2, 24.4, 24.6, 19.1, 21.7, 21.1, 18.9, 19.8,...
## $ AMF     &lt;dbl&gt; 30.0, 28.4, 26.9, 26.7, 26.9, 27.1, 26.5, 24.7, 25.4, 21.7,...
## $ SILTE   &lt;dbl&gt; 1.2, 1.2, 1.2, 0.6, 2.1, 2.2, 0.7, 0.2, 2.5, 0.2, 2.5, 2.6,...
## $ ARGILA  &lt;dbl&gt; 21.5, 20.4, 21.4, 20.5, 20.7, 23.5, 23.1, 22.7, 22.0, 18.5,...
## $ S_A     &lt;dbl&gt; 0.05, 0.05, 0.05, 0.02, 0.10, 0.09, 0.03, 0.01, 0.11, 0.01,...
## $ AF_AG   &lt;dbl&gt; 6.16, 5.53, 4.44, 6.42, 7.94, 5.03, 6.03, 4.49, 4.20, 3.36,...
## $ P       &lt;dbl&gt; 42, 22, 41, 27, 11, 12, 11, 16, 38, 25, 25, 6, 6, 7, 5, 4, ...
## $ pH      &lt;dbl&gt; 4.2, 3.8, 4.8, 4.0, 4.4, 4.0, 4.8, 5.4, 4.4, 5.2, 4.5, 5.1,...
## $ K       &lt;dbl&gt; 0.27, 0.11, 0.34, 0.13, 0.11, 0.14, 0.23, 0.28, 0.19, 0.14,...
## $ Ca      &lt;dbl&gt; 1.4, 0.4, 2.4, 0.7, 1.4, 0.6, 1.6, 3.3, 1.6, 2.9, 1.3, 1.6,...
## $ Mg      &lt;dbl&gt; 0.3, 0.1, 0.4, 0.1, 0.3, 0.1, 0.7, 1.3, 0.5, 1.7, 0.6, 0.8,...
## $ H_Al    &lt;dbl&gt; 5.2, 5.8, 4.2, 5.2, 4.2, 5.2, 3.4, 2.5, 5.2, 3.1, 4.2, 2.5,...
## $ SB      &lt;dbl&gt; 1.97, 0.61, 3.14, 0.93, 1.81, 0.84, 2.53, 4.88, 2.29, 4.74,...
## $ T       &lt;dbl&gt; 7.17, 6.41, 7.34, 6.13, 6.01, 6.04, 5.93, 7.38, 7.49, 7.84,...
## $ V       &lt;dbl&gt; 27, 10, 43, 15, 30, 14, 43, 66, 31, 60, 32, 50, 22, 35, 36,...</code></pre>
<p>As práticas abaixo serão realizadas sem o armazenamento dos resultados em novos objetos, assim ao final de cada operação será utilizado a função <code>View()</code> para gerar a visualização do data.frame resposta em uma nova aba do RStudio.</p>
</div>
<div id="filter" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> filter()</h2>
<p>O <code>filter()</code> permite que você crie um subconjuto de observações com base em seus valores. Por exemplo, vamos selecionar somente as observações <strong>linhas</strong> para superfície geomórfica <code>II</code>. Para isso, dentro da função <code>filter()</code> faremos uma operação relacional, perguntando quais os valores de <code>SUP</code> iguais a <code>II</code>.</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb284-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb284-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb284-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SUP <span class="sc">==</span> <span class="st">&quot;II&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb284-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb284-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Quando executamos essa linha de código o <code>dplyr</code> realiza a operação de filtragem e retorna um novo data.frame. As entradas não são modificadas, então, para salvar o resultado em um novo objeto, será necessário o operador de atribuição (<code>&lt;-</code>) e a atribuição a um novo objeto, por exemplo <code>dado_auxiliar</code>:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb285-1" aria-hidden="true" tabindex="-1"></a>dado_auxiliar <span class="ot">&lt;-</span> geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb285-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb285-2" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">filter</span>(SUP <span class="sc">==</span> <span class="st">&quot;II&quot;</span>)</span>
<span id="cb285-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb285-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(dado_auxiliar)</span></code></pre></div>
<pre><code>## Rows: 62
## Columns: 22
## $ SUP     &lt;chr&gt; &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;, &quot;II&quot;,...
## $ Solo    &lt;chr&gt; &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LVp&quot;, &quot;LV...
## $ Amostra &lt;int&gt; 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32,...
## $ X       &lt;int&gt; 425, 450, 475, 500, 525, 550, 575, 600, 625, 650, 675, 700,...
## $ AMG     &lt;dbl&gt; 0.2, 0.3, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.5, 0.4, 0.2,...
## $ AG      &lt;dbl&gt; 3.64, 3.43, 3.23, 2.83, 3.85, 3.64, 3.64, 4.45, 4.24, 6.14,...
## $ AM      &lt;dbl&gt; 27.5, 24.6, 23.7, 19.2, 16.6, 19.0, 19.0, 23.3, 20.6, 30.3,...
## $ AF      &lt;dbl&gt; 24.5, 34.2, 25.7, 27.0, 15.9, 18.4, 18.4, 23.3, 21.9, 20.5,...
## $ AMF     &lt;dbl&gt; 20.4, 12.6, 24.7, 28.0, 35.3, 32.1, 32.1, 26.4, 27.3, 20.2,...
## $ SILTE   &lt;dbl&gt; 1.8, 4.0, 2.1, 4.2, 2.7, 1.0, 1.0, 1.0, 1.2, 1.6, 1.8, 0.6,...
## $ ARGILA  &lt;dbl&gt; 22.0, 21.0, 20.5, 18.5, 25.5, 26.6, 26.6, 21.4, 24.4, 20.7,...
## $ S_A     &lt;dbl&gt; 0.08, 0.19, 0.10, 0.23, 0.11, 0.04, 0.04, 0.05, 0.05, 0.08,...
## $ AF_AG   &lt;dbl&gt; 6.73, 9.97, 7.96, 9.54, 4.13, 5.05, 5.05, 5.24, 5.17, 3.34,...
## $ P       &lt;dbl&gt; 3, 2, 3, 3, 2, 2, 2, 3, 4, 4, 6, 2, 3, 2, 14, 106, 107, 83,...
## $ pH      &lt;dbl&gt; 4.0, 3.9, 3.9, 3.8, 3.8, 3.8, 3.8, 4.0, 3.8, 3.9, 4.0, 3.8,...
## $ K       &lt;dbl&gt; 0.05, 0.01, 0.04, 0.01, 0.02, 0.01, 0.01, 0.16, 0.04, 0.08,...
## $ Ca      &lt;dbl&gt; 0.6, 0.3, 0.4, 0.2, 0.2, 0.2, 0.2, 0.5, 0.2, 0.4, 0.6, 0.4,...
## $ Mg      &lt;dbl&gt; 0.2, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1,...
## $ H_Al    &lt;dbl&gt; 5.2, 5.2, 5.8, 6.4, 6.4, 6.4, 5.8, 4.2, 5.2, 5.2, 5.8, 5.8,...
## $ SB      &lt;dbl&gt; 0.85, 0.41, 0.54, 0.31, 0.32, 0.31, 0.31, 0.76, 0.34, 0.58,...
## $ T       &lt;dbl&gt; 6.05, 5.61, 6.34, 6.71, 6.72, 6.71, 6.11, 4.96, 5.54, 5.78,...
## $ V       &lt;dbl&gt; 14, 7, 9, 5, 5, 5, 5, 15, 6, 10, 12, 8, 12, 22, 54, 38, 46,...</code></pre>
<p>Agora vamos selecionar as observações com teor de argila maior do que <code>10%</code>, provenientes da superfície <code>III</code>. Para realizarmos essa operação, serão necessárias duas operações relacionais, uma com a coluna <code>ARGILA</code> e outra com a coluna <code>SUP</code>, tais operações serão realizadas dentro de <code>filter()</code> separadas por uma vírgula.</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb287-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb287-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb287-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(ARGILA <span class="sc">&gt;</span> <span class="dv">10</span>, SUP <span class="sc">==</span> <span class="st">&quot;III&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb287-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb287-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione todas as observações que não sejam Regossolo, ou seja, todas os registros cujo tipo de solo seja diferente de <code>R</code>.</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb288-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb288-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb288-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Solo <span class="sc">!=</span> <span class="st">&quot;R&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb288-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb288-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>ou</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb289-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb289-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb289-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(Solo <span class="sc">==</span> <span class="st">&quot;R&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb289-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb289-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Anteriormente utilizamos a geometria <code>geom_bar()</code> para contar o número de pontos experimentais existentes em cada uma dessas superfícies. Para observarmos a tabela com a contagem poderíamos utilizar as função <code>group_by()</code> para agruparmos as categorias da variável <code>SUP</code> e, posteriormente, a função <code>count()</code> para realizar o processo de contagem das observações em cada grupo, gerando uma tabela com as colunas <code>SUP</code> para as categorias de superfície e <code>n</code> para a contagem.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb290-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb290-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb290-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb290-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb290-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb290-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb290-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>() </span></code></pre></div>
<p>Pronto, agora podemos associar o <code>ggplot()</code> a essa filtragem:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb291-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb291-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb291-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb291-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb291-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb291-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb291-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb291-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>SUP, <span class="at">y=</span>n)) <span class="sc">+</span></span>
<span id="cb291-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb291-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p>Agora vamos selecionar somente os registros referentes aos Latossolos, ou seja, todos aqueles que tenham nomes iguais a <code>LV</code> ou <code>LVp</code>.</p>
<p>Para essa manipulação, podemos utilizar o operador lógico de disjunção <strong>OU</strong> <code>|</code>.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb292-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb292-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb292-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Solo <span class="sc">==</span> <span class="st">&quot;LV&quot;</span> <span class="sc">|</span> Solo <span class="sc">==</span> <span class="st">&quot;LVp&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb292-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb292-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Um atalho útil para a solução desse problema é o operador <code>x %in% y</code>. Isso selecionará toda linha em que <code>x</code> seja um dos valores em <code>y</code>, então, vamos reescrever o código acima de uma forma mais elegante.</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb293-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb293-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb293-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Solo <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;LV&quot;</span>,<span class="st">&quot;LVp&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb293-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb293-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<div id="valores-faltantes" class="section level3" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Valores Faltantes</h3>
<p>Um recurso importante do R que pode complicar as comparações e, consequentemente as operações de fintragem, são os valores faltantes ou <code>NA</code>s (<em>not availables</em>). <code>NA</code> representa um valor desconhecido, então valores faltantes se propagam nas operações, são <em>contagiosos</em>, ou seja, quase toda operação envolvendo valor(es) desconhecido(s) terá como resultado um valor desconhecido.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">&gt;</span> <span class="dv">5</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">+</span> <span class="dv">10</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">/</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="cn">NA</span> <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Seja <code>x</code> a idade de Maria. Não sabemos a idade de Maria:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb304-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p>Seja <code>y</code> a idade de João. Não sabemos a idade de João:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb305-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p>Maria e João têm a mesma idade?</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb306-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> y</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Não sabemos.</span></span></code></pre></div>
<p>Se quisermos determinar se há um valor faltantE, usamos <code>is.na()</code>.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(y)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>A função <code>filter()</code> somente inclui linhas onde a condição é <code>TRUE</code>, ele exclui valores <code>FALSE</code> e <code>NA</code>. Vamos criar um exemplo rápido referente a nota de 7 alunos na primeira prova da disciplina de estatística da FCAV.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb313-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">nome =</span> <span class="fu">c</span>(<span class="st">&quot;Ana&quot;</span>,<span class="st">&quot;Beatriz&quot;</span>,<span class="st">&quot;Douglas&quot;</span>,<span class="st">&quot;Luis&quot;</span>,<span class="st">&quot;Marcela&quot;</span>,<span class="st">&quot;Paulo&quot;</span>,<span class="st">&quot;Renata&quot;</span>), </span>
<span id="cb313-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb313-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">P1 =</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="cn">NA</span>,<span class="dv">6</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">6</span>,<span class="dv">3</span>), </span>
<span id="cb313-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb313-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">P2=</span><span class="fu">c</span>(<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">4</span>),</span>
<span id="cb313-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb313-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">Psub=</span><span class="fu">c</span>(<span class="cn">NA</span>,<span class="dv">8</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="cn">NA</span>,<span class="dv">5</span>,<span class="dv">6</span>))</span>
<span id="cb313-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb313-5" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 7 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA
## 2 Beatriz    NA     7     8
## 3 Douglas     6     4     7
## 4 Luis        3     2     9
## 5 Marcela    NA    NA    NA
## 6 Paulo       6    NA     5
## 7 Renata      3     4     6</code></pre>
<p>Se quisermos realizar a filtragem para todos os valores de <code>P1</code> maiores que 4:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb315-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb315-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb315-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(P1 <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA
## 2 Douglas     6     4     7
## 3 Paulo       6    NA     5</code></pre>
<p>Se quisermos preservar o <code>NA</code>, devemos pedir explicitamente, caso contrário eles serão excluídos da filtragem.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb317-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb317-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb317-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(P1 <span class="sc">&gt;</span> <span class="dv">4</span> <span class="sc">|</span> <span class="fu">is.na</span>(P1))</span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA
## 2 Beatriz    NA     7     8
## 3 Douglas     6     4     7
## 4 Marcela    NA    NA    NA
## 5 Paulo       6    NA     5</code></pre>
<p>Vamos selecionar os alunos que fizeram, pelo menos, uma prova.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb319-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb319-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb319-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(P1)<span class="sc">|!</span><span class="fu">is.na</span>(P2)<span class="sc">|!</span><span class="fu">is.na</span>(Psub))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA
## 2 Beatriz    NA     7     8
## 3 Douglas     6     4     7
## 4 Luis        3     2     9
## 5 Paulo       6    NA     5
## 6 Renata      3     4     6</code></pre>
<p>Vamos selecionar os alunos que fizeram as 3 provas.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb321-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb321-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb321-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(P1), <span class="sc">!</span><span class="fu">is.na</span>(P2), <span class="sc">!</span><span class="fu">is.na</span>(Psub))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Douglas     6     4     7
## 2 Luis        3     2     9
## 3 Renata      3     4     6</code></pre>
</div>
<div id="strings-e-regex" class="section level3" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Strings e Regex</h3>
<p>A função <code>str_detect()</code> pertence ao pacote <code>stringr</code> e tem a finalidade de detectar a presença ou a ausência de um padrão de caracteres dentro de uma <code>string</code> (cadeia de caracteres).</p>
<p>O pacote <code>stringr</code> faz parte do pacote <code>tidyverse</code>, cuja sintaxe é o <em>Regex</em> do inglês (<em>Regular Expressions</em>) são expressões regulares, ou seja, ferramenta para descrever os padrões dentro da string.</p>
<p>Portanto, uma breve explicação se faz necessária para aplicações posteriores.</p>
<p>Vamos criar duas strings:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb323-1" aria-hidden="true" tabindex="-1"></a>string1 <span class="ot">&lt;-</span> <span class="st">&quot;Isso é uma string&quot;</span></span>
<span id="cb323-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb323-2" aria-hidden="true" tabindex="-1"></a>string2 <span class="ot">&lt;-</span> <span class="st">&#39;Se você quiser adicionar &quot;aspas duplas&quot; dentro da string, utilize aspas simples&#39;</span></span>
<span id="cb323-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb323-3" aria-hidden="true" tabindex="-1"></a>string1</span></code></pre></div>
<pre><code>## [1] &quot;Isso é uma string&quot;</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb325-1" aria-hidden="true" tabindex="-1"></a>string2</span></code></pre></div>
<pre><code>## [1] &quot;Se você quiser adicionar \&quot;aspas duplas\&quot; dentro da string, utilize aspas simples&quot;</code></pre>
<p>A representação impressa de uma string mostra as barras transversas <code>\</code>, já o conteúdo bruto da string pode ser apresentado por <code>writeLines()</code>.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(string2)</span></code></pre></div>
<pre><code>## Se você quiser adicionar &quot;aspas duplas&quot; dentro da string, utilize aspas simples</code></pre>
<p>Observe mais esse exemplo.
* <code>\"</code> aspas duplas<br />
* <code>\\</code> caractere de barra transversa<br />
* <code>\n</code> nova linha<br />
* <code>\t</code> tabulação<br />
* <code>\u00b5</code> caracteres que não pertencem ao inglês.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb329-1" aria-hidden="true" tabindex="-1"></a>string3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span>, <span class="st">&quot;A</span><span class="sc">\t</span><span class="st">B&quot;</span>, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="st">&quot;\u00b5&quot;</span>) </span>
<span id="cb329-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb329-2" aria-hidden="true" tabindex="-1"></a>string3</span></code></pre></div>
<pre><code>## [1] &quot;\&quot;&quot;  &quot;\n&quot;  &quot;\\&quot;  &quot;A\tB&quot; &quot;\n&quot;  &quot;µ&quot;</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(string3)</span></code></pre></div>
<pre><code>## &quot;
## 
## 
## \
## A    B
## 
## 
## µ</code></pre>
<p>O pacote básico do R contém muitas funções para trabalhar com strings, mas vamos evitá-las porque podem ser inconsistentes, o que as torna difíceis de lembrar. Já o pacote <code>stringr</code> é de mais simples utilização, pois têm nomes intuitivos, todos começam com <code>str_</code>. Por exemplo, <code>str_length()</code> informa o número de caracteres em uma string:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb333-1" aria-hidden="true" tabindex="-1"></a>meu_texto <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;R para data science&#39;</span>, <span class="cn">NA</span>, <span class="st">&#39;UNESP-FCAV&#39;</span>)</span>
<span id="cb333-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(meu_texto)</span></code></pre></div>
<pre><code>## [1]  1 19 NA 10</code></pre>
<p>A combinação de strings pode ser feita com o <code>str_c()</code>, utilizando o argumento <code>sep</code> para controlar o separador entre as strings.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;objeto&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;objeto_1&quot; &quot;objeto_2&quot; &quot;objeto_3&quot; &quot;objeto_4&quot; &quot;objeto_5&quot;</code></pre>
<p><strong>OBS</strong> Poderíamos ter o mesmo efeito com a função <code>paste()</code> do pacote base do R.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;objeto&quot;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;objeto_1&quot; &quot;objeto_2&quot; &quot;objeto_3&quot; &quot;objeto_4&quot; &quot;objeto_5&quot;</code></pre>
<p>Contudo, observe a forma com a qual as funções operam valores faltantes <code>NA</code>.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;objeto&quot;</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="cn">NA</span>,<span class="dv">3</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;objeto_1&quot;  &quot;objeto_NA&quot; &quot;objeto_3&quot;</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;objeto&quot;</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="cn">NA</span>,<span class="dv">3</span>), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;objeto_1&quot; NA         &quot;objeto_3&quot;</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;objeto&quot;</span>, <span class="fu">str_replace_na</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="cn">NA</span>,<span class="dv">3</span>)), <span class="at">sep=</span><span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;objeto_1&quot;  &quot;objeto_NA&quot; &quot;objeto_3&quot;</code></pre>
<p>Como a maioria das outras funções em R, os valores ausentes se propagam nas operações. Se você quiser que eles sejam impressos como <strong>NA</strong>, use <code>str_replace_na()</code>:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;---&quot;</span>, meu_texto, <span class="st">&quot;---&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;---a---&quot;                   &quot;---R para data science---&quot;
## [3] NA                          &quot;---UNESP-FCAV---&quot;</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&quot;---&quot;</span>, <span class="fu">str_replace_na</span>(meu_texto), <span class="st">&quot;---&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;---a---&quot;                   &quot;---R para data science---&quot;
## [3] &quot;---NA---&quot;                  &quot;---UNESP-FCAV---&quot;</code></pre>
<p>Para colapsar um vetor de strings em uma única string, use o argumento <code>colappse</code> n função <code>str_c()</code>:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb349-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>,<span class="st">&quot;mais&quot;</span>,<span class="st">&quot;bonita&quot;</span>)</span>
<span id="cb349-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb349-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(y, <span class="at">collapse =</span> <span class="st">&quot; &quot;</span> )</span></code></pre></div>
<pre><code>## [1] &quot;A mais bonita&quot;</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(meu_texto, <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>) <span class="co"># propagação do NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="fu">str_replace_na</span>(meu_texto), <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a, R para data science, NA, UNESP-FCAV&quot;</code></pre>
<p>Podemos extrair partes de uma string usando <code>str_sub()</code>, que leva os argumentos inicial e final que fornecem a posição (inclusiva) da substring. No exemplo abaixo, vamos extrair do primeiro ao quarto caracter de cada string do objeto <code>x</code>.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb355-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="st">&quot;testemunha&quot;</span>,<span class="st">&quot;escarificador&quot;</span>,<span class="st">&quot;arado de disco&quot;</span>,<span class="st">&quot;grade aradora&quot;</span>,<span class="st">&quot;subsolador&quot;</span>)</span>
<span id="cb355-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb355-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] &quot;test&quot; &quot;esca&quot; &quot;arad&quot; &quot;grad&quot; &quot;subs&quot;</code></pre>
<p>Números negativos contam de trás para frente para a realizar a extração.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x,<span class="sc">-</span><span class="dv">4</span>,<span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;unha&quot; &quot;ador&quot; &quot;isco&quot; &quot;dora&quot; &quot;ador&quot;</code></pre>
<p>Podemos utilizar essa função para alterar uma string, por exemplo, passar as primeira letras para maiúsculas</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="dv">1</span>) <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(<span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="dv">1</span>))</span>
<span id="cb359-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb359-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;Testemunha&quot;     &quot;Escarificador&quot;  &quot;Arado de disco&quot; &quot;Grade aradora&quot; 
## [5] &quot;Subsolador&quot;</code></pre>
<p>Ou podemos passar todas para maiúsculas.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="fu">str_length</span>(x)) <span class="ot">&lt;-</span> <span class="fu">str_to_upper</span>(<span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="dv">256</span>))</span>
<span id="cb361-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb361-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;TESTEMUNHA&quot;     &quot;ESCARIFICADOR&quot;  &quot;ARADO DE DISCO&quot; &quot;GRADE ARADORA&quot; 
## [5] &quot;SUBSOLADOR&quot;</code></pre>
<p>Ou podemos passar todas para minúsculas, novamente…</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="fu">str_length</span>(x)) <span class="ot">&lt;-</span> <span class="fu">str_to_lower</span>(<span class="fu">str_sub</span>(x,<span class="dv">1</span>,<span class="dv">256</span>))</span>
<span id="cb363-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb363-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] &quot;testemunha&quot;     &quot;escarificador&quot;  &quot;arado de disco&quot; &quot;grade aradora&quot; 
## [5] &quot;subsolador&quot;</code></pre>
<p>Podemos buscar combinações simples, para facilitar a verificação, vamos utilizar <code>str_view()</code>.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;ad&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-53fa4179fe38934ea8d6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-53fa4179fe38934ea8d6">{"x":{"html":"<ul>\n  <li>testemunha<\/li>\n  <li>escarific<span class='match'>ad<\/span>or<\/li>\n  <li>ar<span class='match'>ad<\/span>o de disco<\/li>\n  <li>gr<span class='match'>ad<\/span>e aradora<\/li>\n  <li>subsol<span class='match'>ad<\/span>or<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Podemos utilizar o ponto <code>.</code> para encontrar a combinação com qualquer caractere (exceto no início ou no final da string).</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;.a.&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-57eccfcc24786382baf0" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-57eccfcc24786382baf0">{"x":{"html":"<ul>\n  <li>testemunha<\/li>\n  <li>es<span class='match'>car<\/span>ificador<\/li>\n  <li>a<span class='match'>rad<\/span>o de disco<\/li>\n  <li>g<span class='match'>rad<\/span>e aradora<\/li>\n  <li>subso<span class='match'>lad<\/span>or<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Se estivermos procurando o caractere ponto <code>.</code>, vamos utilizar <code>\\.</code>.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb367-1" aria-hidden="true" tabindex="-1"></a>meu_texto_2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;abc&quot;</span>, <span class="st">&quot;a*b&quot;</span>, <span class="st">&quot;a b&quot;</span> ,<span class="st">&quot;a.c&quot;</span>)</span>
<span id="cb367-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb367-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(meu_texto_2, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-f6acdf0481d87f8eb36f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f6acdf0481d87f8eb36f">{"x":{"html":"<ul>\n  <li>abc<\/li>\n  <li>a*b<\/li>\n  <li>a b<\/li>\n  <li>a<span class='match'>.<\/span>c<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Por <em>default</em>, as expressões regulares corresponderão a qualquer parte de uma string. Muitas vezes, é útil ancorar a expressão regular de forma que corresponda desde o início ou ao final da string. Assim, podemos utilizar as <em>âncoras</em>:</p>
<p>*<code>^</code> para combinar com o início da string.</p>
<p>*<code>$</code> para combinar com o final da string.</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;^a&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-c9a710090da16f5ad903" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-c9a710090da16f5ad903">{"x":{"html":"<ul>\n  <li>testemunha<\/li>\n  <li>escarificador<\/li>\n  <li><span class='match'>a<\/span>rado de disco<\/li>\n  <li>grade aradora<\/li>\n  <li>subsolador<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(x, <span class="st">&quot;r$&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-0271bc107a97082f460a" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-0271bc107a97082f460a">{"x":{"html":"<ul>\n  <li>testemunha<\/li>\n  <li>escarificado<span class='match'>r<\/span><\/li>\n  <li>arado de disco<\/li>\n  <li>grade aradora<\/li>\n  <li>subsolado<span class='match'>r<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Para forçar uma expressão regular a corresponder apenas a uma string completa, ancore-a com <code>^</code> e <code>$</code>:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb370-1" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;Arado&quot;</span>,<span class="st">&quot;Arado de disco&quot;</span>,<span class="st">&quot;Arado de aiveca&quot;</span>, <span class="st">&quot;Grade aradora&quot;</span>)</span>
<span id="cb370-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(z,<span class="st">&quot;Arado&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-d0132a066eda8630d759" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-d0132a066eda8630d759">{"x":{"html":"<ul>\n  <li><span class='match'>Arado<\/span><\/li>\n  <li><span class='match'>Arado<\/span> de disco<\/li>\n  <li><span class='match'>Arado<\/span> de aiveca<\/li>\n  <li>Grade aradora<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(z,<span class="st">&quot;^Arado$&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-bc7beb20c23711085352" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-bc7beb20c23711085352">{"x":{"html":"<ul>\n  <li><span class='match'>Arado<\/span><\/li>\n  <li>Arado de disco<\/li>\n  <li>Arado de aiveca<\/li>\n  <li>Grade aradora<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script>
<p>Voltando à manipulação dos dados de <code>geomorfologia</code>, podemos filtrar todos os Argissolos utilizando o <em>regex</em>, ou seja, podemos selecionar todos aqueles solos que començam com a letra <strong>P</strong>.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb372-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb372-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb372-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;^P&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># ^, significa &quot;começa com&quot;</span></span>
<span id="cb372-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb372-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione os registros cujo solo é “PV4.”</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb373-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb373-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb373-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;PV4&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb373-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb373-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb374-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb374-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb374-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;4$&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb374-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb374-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Podemos criar nossas próprias classes de personagens usando <code>[ ]</code>:</p>
<p><code>[abc]</code>: corresponde <code>a</code>, <code>b</code> ou <code>c</code>.<br />
<code>[a-z]</code>: corresponde a todos os caracteres entre <code>a</code> e <code>z</code>.<br />
<code>[^abc]</code>: corresponde a qualquer coisa, exceto <code>a</code>, <code>b</code> ou <code>c</code>.<br />
<code>[\^\-]</code>: corresponde a <code>^</code> ou <code>-</code>.</p>
<p>Por exemplo, retirando, novamente, o Regossolo.</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb375-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb375-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;[^R]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb375-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb375-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>[:space:]: caracteres de espaço (basicamente equivalente a <code>\s</code>).<br />
[:blank:]: espaço e tabulação.</p>
<p>Selecione os registros que terminam com um número.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb376-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb376-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb376-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;[:digit:]$&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb376-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb376-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione todos aqueles que não tenham dígitos nos nomes.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb377-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb377-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb377-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(Solo,<span class="st">&quot;[:digit:]&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb377-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb377-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p><strong>OBS</strong>: Todos eles vão dentro de <code>[ ]</code> para classes de caracteres, ou seja, <code>[[:dígito:]AX]</code> corresponde a todos os dígitos, a letra <code>A</code> e a letra <code>X</code>.</p>
<p>Selecione todos Regossolo ou Latossolo.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb378-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb378-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb378-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;R|LV&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb378-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb378-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione todos Regossolo ou Latossolo <code>LV</code>, excluindo o <code>LVp</code>.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb379-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb379-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb379-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(Solo,<span class="st">&quot;R|^LV$&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb379-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb379-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-186"></span>
<img src="img/regex_meme.jpg" alt="Um exemplo patológico devido à complexidade de endereços de e-mail." width="500px" />
<p class="caption">
Figure 9.1: Um exemplo patológico devido à complexidade de endereços de e-mail.
</p>
</div>
</div>
</div>
<div id="arrange" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> arrange()</h2>
<p>A funçao <code>arrange()</code> funciona de maneira similar a <code>filter()</code>, mas, ao invés de selecionar linhas, ela muda a ordem delas. Ela recebe um data.frame e um conjunto de nomes de colunas pelos quais ordenar. Se fornecermos mais de um nome de coluna, cada coluna adicional será usada para desempate nos valores das colunas anteriores.</p>
<p>Vamos classificar os registros por ordem crescente de teor de argila.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb380-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb380-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ARGILA) <span class="sc">%&gt;%</span> </span>
<span id="cb380-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb380-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Classifique os registros por ordem decrescente de teor de acidez <span class="math inline">\(H+Al\)</span>. Para isso vamos utilizar a função <code>desc()</code> que reordena a coluna em ordem descendente.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb381-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb381-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb381-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(H_Al)) <span class="sc">%&gt;%</span> </span>
<span id="cb381-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb381-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Classifique os registros por ordem alfabéticas de solos e utilize como crotério de desempate o teor de fósforo disponível no solo em ordem decrescente.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb382-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb382-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb382-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Solo, <span class="fu">desc</span>(P)) <span class="sc">%&gt;%</span> </span>
<span id="cb382-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb382-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Valores flatantes são sempre colocados no final, veja o exemplo abaixo utilizando as notas de alunos anterioremente criadas.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb383-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb383-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb383-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Psub))</span></code></pre></div>
<pre><code>## # A tibble: 7 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Luis        3     2     9
## 2 Beatriz    NA     7     8
## 3 Douglas     6     4     7
## 4 Renata      3     4     6
## 5 Paulo       6    NA     5
## 6 Ana         8     9    NA
## 7 Marcela    NA    NA    NA</code></pre>
</div>
<div id="select" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> select()</h2>
<p>Não é incomum obter conjuntos de dados com centenasou até milhares de variáveis. Neste caso, o rimeiro desafio frequentemente é limitar-se às variávies em que você realmente está interessado. A função <code>select()</code> permite que você foque em um subconjunto útil usando operações baseadas em nomes de vaiávies.</p>
<p>Seleciona colunas de uma tabela e pode ser utilizado com as funções:</p>
<pre><code>* starts_with(&quot;abc&quot;): seleciona nomes que começam com &quot;abc&quot;

* ends_with(&quot;xyz&quot;): seleciona nomes que terminam com &quot;xyz&quot;

* contains(&quot;ijk&quot;): seleciona nomes que contêm &quot;ijk&quot;

* matches(&quot;(.)\\1&quot;): seleciona nomes usando Expressões Regulares 

* num_range(&quot;x&quot;, 1:3): seleciona x1, x2 e x3</code></pre>
<p>Selecione as colunas SUP, Solo e ARGILA.</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb386-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb386-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb386-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(SUP, Solo, ARGILA) <span class="sc">%&gt;%</span> </span>
<span id="cb386-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb386-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione as colunas que comecem com a letra “A.”</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb387-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb387-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb387-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;A&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb387-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb387-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Selecione as colunas que NÃO comecem com a letra “A.”</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb388-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb388-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb388-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">starts_with</span>(<span class="st">&quot;A&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb388-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb388-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
</div>
<div id="mutate" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> mutate()</h2>
<p>Vamos voltar ao exemplo das notas dos alunos, que estão armazenadas no objeto <code>df</code>.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb389-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 7 x 4
##   nome       P1    P2  Psub
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA
## 2 Beatriz    NA     7     8
## 3 Douglas     6     4     7
## 4 Luis        3     2     9
## 5 Marcela    NA    NA    NA
## 6 Paulo       6    NA     5
## 7 Renata      3     4     6</code></pre>
<p>Devemos agora calcular a média final do aluno, seguindo o critério:</p>
<p><span class="math display">\[
MF = \frac{P1+P2}{2}
\]</span>
Se o aluno fez a prova substitutiva (<code>Psub</code>) ela deve substituir a prova faltante, ou a menor nota de prova.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb391-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb391-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">SOMA =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(Psub),P1<span class="sc">+</span>P2,</span>
<span id="cb391-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-4" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">if_else</span>(<span class="fu">is.na</span>(P1),P2<span class="sc">+</span>Psub, </span>
<span id="cb391-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-5" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">if_else</span>(<span class="fu">is.na</span>(P2),P1<span class="sc">+</span>Psub,</span>
<span id="cb391-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="fu">if_else</span>(P1<span class="sc">&lt;</span>P2,P2<span class="sc">+</span>Psub,P1<span class="sc">+</span>Psub)))),</span>
<span id="cb391-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">MF=</span>SOMA<span class="sc">/</span><span class="dv">2</span></span>
<span id="cb391-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb391-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 6
##   nome       P1    P2  Psub  SOMA    MF
##   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Ana         8     9    NA    17   8.5
## 2 Beatriz    NA     7     8    15   7.5
## 3 Douglas     6     4     7    13   6.5
## 4 Luis        3     2     9    12   6  
## 5 Marcela    NA    NA    NA    NA  NA  
## 6 Paulo       6    NA     5    11   5.5
## 7 Renata      3     4     6    10   5</code></pre>
<p>Calcule a soma dos teores de ARGILA + SILTE e, em seguida, coloque o teor de fósforo na escala logarítmica.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb393-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb393-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb393-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb393-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb393-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ARG_SILT =</span> ARGILA <span class="sc">+</span> SILTE,</span>
<span id="cb393-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb393-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">log_P =</span> <span class="fu">log10</span>(P)) <span class="sc">%&gt;%</span> </span>
<span id="cb393-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb393-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">View</span>()</span></code></pre></div>
<p>Classifique a Textura do solo.</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-197"></span>
<img src="img/textura.gif" alt="A figura 1 apresenta os intervalos de argila e a respectiva classificação do solo. . FONTE (https://www.pedologiafacil.com.br/textura.php)" width="600px" />
<p class="caption">
Figure 9.2: A figura 1 apresenta os intervalos de argila e a respectiva classificação do solo. . FONTE (<a href="https://www.pedologiafacil.com.br/textura.php" class="uri">https://www.pedologiafacil.com.br/textura.php</a>)
</p>
</div>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb394-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb394-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">TEXTURA =</span> <span class="fu">case_when</span>(</span>
<span id="cb394-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-4" aria-hidden="true" tabindex="-1"></a>        ARGILA <span class="sc">&lt;</span> <span class="dv">15</span> <span class="sc">~</span> <span class="st">&quot;Arenosa&quot;</span>,</span>
<span id="cb394-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-5" aria-hidden="true" tabindex="-1"></a>        ARGILA <span class="sc">&lt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="st">&quot;Media&quot;</span>,</span>
<span id="cb394-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-6" aria-hidden="true" tabindex="-1"></a>        ARGILA <span class="sc">&lt;=</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">&quot;Argilosa&quot;</span>,</span>
<span id="cb394-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-7" aria-hidden="true" tabindex="-1"></a>        ARGILA <span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">~</span> <span class="st">&quot;Muito argilosa&quot;</span>,</span>
<span id="cb394-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-8" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Sem classificação&quot;</span>)</span>
<span id="cb394-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb394-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="resumos-agrupados-com-summarize" class="section level2" number="9.7">
<h2><span class="header-section-number">9.7</span> Resumos Agrupados com summarize()</h2>
<p>A função <code>summarize()</code> reduz um data frame a uma única linha:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb395-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb395-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media_ARGILA =</span> <span class="fu">mean</span>(ARGILA, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>##   media_ARGILA
## 1     14.60189</code></pre>
<p>Essa função é extremamente útil quando combinada à função <code>group_by()</code>. Isso muda a unidade da análise de tdo o conjunto de dados para os grupos de indivíduais. Então, ao usarmos os verbos do <strong>dplyr</strong> em um data.frame agrupado, eles são automaticamente aplicados “por grupo.” Por exemplo, vamos aplicar o mesmo código anterior ao data.frame agrupado por superfície geomórfica, obteremos o atraso médio por data.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb397-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb397-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb397-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb397-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb397-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">media_ARGILA =</span> <span class="fu">mean</span>(ARGILA, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   SUP   media_ARGILA
## * &lt;chr&gt;        &lt;dbl&gt;
## 1 I             21.1
## 2 II            14.8
## 3 III           10.1</code></pre>
<div id="valores-faltantes-1" class="section level3" number="9.7.1">
<h3><span class="header-section-number">9.7.1</span> Valores faltantes</h3>
<p>O argumento <code>na.rm = TRUE</code> esse arguento é utilizado para remoção dos valores faltantes da variáviel. Isso porque as funções de agregação obedecem à regra usual de <code>NA</code>s, ou seja, qualquer valor faltando na entrada, a saída será um valor faltante. Assim o uso desse argumento é essencial.</p>
</div>
<div id="counts" class="section level3" number="9.7.2">
<h3><span class="header-section-number">9.7.2</span> Counts</h3>
<p>Sempre que fizer agregação, sugerimos que inclua uma contagem <code>n()</code> ou uma contagem de valores não faltantes (<code>sum(!is.na(x))</code>). Deste modo podemos verificar que não estamos tirando conclusões com base em quantidades muito pequenas de dados.</p>
<p>Por exemplo, vamos pedir a média da variável <code>AMG</code> (areia muito grossa) para cada tipo de solo identificado no levantamento em função do número de observações (<code>n</code>). Para isso vamos unir as funções <code>group_by()</code>, <code>summarize()</code> e <code>ggplot()</code>.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb399-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Solo) <span class="sc">%&gt;%</span> </span>
<span id="cb399-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">media_AMG =</span> <span class="fu">mean</span>(AMG, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb399-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb399-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>n, <span class="at">y=</span>media_AMG, <span class="at">fill=</span>Solo)) <span class="sc">+</span></span>
<span id="cb399-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb399-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">21</span>, <span class="at">size=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="r_data_science_fcav_files/figure-html/unnamed-chunk-201-1.png" width="672" /></p>
<p>Observe que <code>PV1</code>, <code>PV5</code> e <code>R</code> apresentaram <span class="math inline">\(n &lt; 10\)</span>.</p>
</div>
<div id="algumas-funções-de-resumo" class="section level3" number="9.7.3">
<h3><span class="header-section-number">9.7.3</span> Algumas funções de resumo</h3>
<p>Aliadas à média e à contagem, várias outras funções podem ser utilizadas em R.</p>
<p><em>Medidas de localização</em></p>
<p>A função <code>median()</code> retorna a mediana do conjunto de dados, ou seja, um valor onde <span class="math inline">\(50\%\)</span> de <span class="math inline">\(x\)</span> está acima e <span class="math inline">\(50\%\)</span> está abaixo dela. Já a média <code>mean()</code> é a soma dividida pelo comprimento. Assim, a mediana não é influenciada por valores extremos, diferente da média. Compare a diferença entre média e mediana para as variáveis <code>ARGILA</code> e em seguida <code>P</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para Argila</span></span>
<span id="cb400-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb400-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb400-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb400-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb400-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb400-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(ARGILA, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb400-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb400-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(ARGILA, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   SUP   Media Mediana
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 I      21.1    20.7
## 2 II     14.8    14.3
## 3 III    10.1    10.1</code></pre>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb402-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb402-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb402-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb402-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb402-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb402-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb402-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb402-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   SUP   Media Mediana
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1 I      17.8    12  
## 2 II     34.9    12.5
## 3 III    14.0     9</code></pre>
<p><em>Medidas de dispersão</em></p>
<p>O desvio padrão <code>sd()</code> é a medida de dispersão padrão. Outras medidas podem ser utilizadas, como a variação interquartil <code>IQR()</code> e o desvio absoluto mediano <code>mad()</code> são equivalentes obustos que podem ser mais úteis se você tiver outliers.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb404-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb404-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb404-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb404-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb404-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb404-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb404-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb404-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 6
##   SUP   Media Mediana    DP   IQR DA_mediano
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 I      17.8    12    13.2  19        11.9 
## 2 II     34.9    12.5  47.5  39.5      15.6 
## 3 III    14.0     9    14.7  10         7.41</code></pre>
<p><em>Medidas de classificação</em></p>
<p>São os valores mínimo/máximo e os quantis. Quantis são generalizações da mediana. Por exemplo, <code>quantile(x, 0.25)</code> encontrará o valor de <code>x</code> que é maior que <span class="math inline">\(25\%\)</span> dos valores e menor do que os <span class="math inline">\(75\%\)</span> restantes. Já <code>quantile(x, 0.75)</code> encontrará o valor de <code>x</code> que é maior que <span class="math inline">\(75\%\)</span> dos valores e menor do que os <span class="math inline">\(25\%\)</span> restantes.</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb406-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb406-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb406-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-9" aria-hidden="true" tabindex="-1"></a>            Mínimo <span class="ot">=</span> <span class="fu">min</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-10"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q1 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-11"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q3 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb406-12"><a href="manipulação-de-dados-com-o-dplyr.html#cb406-12" aria-hidden="true" tabindex="-1"></a>            Máximo <span class="ot">=</span> <span class="fu">max</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 10
##   SUP   Media Mediana    DP   IQR DA_mediano Mínimo    Q1    Q3 Máximo
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1 I      17.8    12    13.2  19        11.9       4     6  25       42
## 2 II     34.9    12.5  47.5  39.5      15.6       2     4  43.5    209
## 3 III    14.0     9    14.7  10         7.41      3     4  14       56</code></pre>
<p><em>Contagens</em></p>
<p>Vamos agora contar o número de observações e o número de valores não faltantes, utilizando as funções <code>n()</code> e <code>sum(!is.na(x))</code>:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb408-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb408-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb408-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-9" aria-hidden="true" tabindex="-1"></a>            Mínimo <span class="ot">=</span> <span class="fu">min</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-10"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q1 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-11"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q3 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-12"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-12" aria-hidden="true" tabindex="-1"></a>            Máximo <span class="ot">=</span> <span class="fu">max</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb408-13"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">N=</span><span class="fu">n</span>(),</span>
<span id="cb408-14"><a href="manipulação-de-dados-com-o-dplyr.html#cb408-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">N_na =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(P))) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 12
##   SUP   Media Mediana    DP   IQR DA_mediano Mínimo    Q1    Q3 Máximo     N
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 I      17.8    12    13.2  19        11.9       4     6  25       42    17
## 2 II     34.9    12.5  47.5  39.5      15.6       2     4  43.5    209    62
## 3 III    14.0     9    14.7  10         7.41      3     4  14       56    27
## # ... with 1 more variable: N_na &lt;int&gt;</code></pre>
<p>Contagens e proporções de valores lógicos <code>sum(x &gt; 10)</code>, <code>mean(y == 0)</code>. Quando usado com funções numéricas, <code>TRUE</code> é convertido em <span class="math inline">\(1\)</span>, e <code>FALSE</code> em <span class="math inline">\(0\)</span>. ISso torna <code>sum()</code> e <code>mean()</code> muito úteis: <code>sum()</code> retorna o número de <code>TRUE</code> em x e <code>mean(x)</code> retorna a proporção.</p>
<p>Por exemplo, em cada supefície geomórfica, vamos calcular o número e a proporção de valores de <code>P</code> inferiores a 10.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb410-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb410-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb410-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-9" aria-hidden="true" tabindex="-1"></a>            Mínimo <span class="ot">=</span> <span class="fu">min</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-10"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q1 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-11"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q3 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-12"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-12" aria-hidden="true" tabindex="-1"></a>            Máximo <span class="ot">=</span> <span class="fu">max</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb410-13"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">N=</span><span class="fu">n</span>(),</span>
<span id="cb410-14"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">N_na =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(P)),</span>
<span id="cb410-15"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10=</span><span class="fu">sum</span>(P<span class="sc">&lt;</span><span class="dv">10</span>),</span>
<span id="cb410-16"><a href="manipulação-de-dados-com-o-dplyr.html#cb410-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10p=</span><span class="fu">mean</span>(P<span class="sc">&lt;</span><span class="dv">10</span>)) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 14
##   SUP   Media Mediana    DP   IQR DA_mediano Mínimo    Q1    Q3 Máximo     N
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 I      17.8    12    13.2  19        11.9       4     6  25       42    17
## 2 II     34.9    12.5  47.5  39.5      15.6       2     4  43.5    209    62
## 3 III    14.0     9    14.7  10         7.41      3     4  14       56    27
## # ... with 3 more variables: N_na &lt;int&gt;, n10 &lt;int&gt;, n10p &lt;dbl&gt;</code></pre>
<p><em>Medidas da Forma da Distribuição</em></p>
<p>As medidas da forma da distribuição são os coeficientes de assimetria e curtosis.</p>
<p><strong>Assimetria</strong> - é uma medida da simetria da distribuição de frequência. Ela mostra se os desvios da média são maiores para um lado da distribuição do que para o outro. Usualmente, a estimativa do Coeficiente de Assimetria pode ser calculada pela fórmula:</p>
<p><span class="math display">\[
G_1 = \frac{n}{(n-1)(n-2)} \cdot \frac{\sum_{i=1}^n(x_i - \bar{x})^3}{s^3}
\]</span></p>
<p>Vamos utilizar a função <code>skewness()</code> do pacote <code>agricolae</code> para calcular o coeficente de assimetria.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb412-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb412-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb412-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-9" aria-hidden="true" tabindex="-1"></a>            Mínimo <span class="ot">=</span> <span class="fu">min</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-10"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q1 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-11"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q3 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-12"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-12" aria-hidden="true" tabindex="-1"></a>            Máximo <span class="ot">=</span> <span class="fu">max</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb412-13"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">N=</span><span class="fu">n</span>(),</span>
<span id="cb412-14"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">N_na =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(P)),</span>
<span id="cb412-15"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10=</span><span class="fu">sum</span>(P<span class="sc">&lt;</span><span class="dv">10</span>),</span>
<span id="cb412-16"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10p=</span><span class="fu">mean</span>(P<span class="sc">&lt;</span><span class="dv">10</span>),</span>
<span id="cb412-17"><a href="manipulação-de-dados-com-o-dplyr.html#cb412-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">G1 =</span> agricolae<span class="sc">::</span><span class="fu">skewness</span>(P)) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 15
##   SUP   Media Mediana    DP   IQR DA_mediano Mínimo    Q1    Q3 Máximo     N
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 I      17.8    12    13.2  19        11.9       4     6  25       42    17
## 2 II     34.9    12.5  47.5  39.5      15.6       2     4  43.5    209    62
## 3 III    14.0     9    14.7  10         7.41      3     4  14       56    27
## # ... with 4 more variables: N_na &lt;int&gt;, n10 &lt;int&gt;, n10p &lt;dbl&gt;, G1 &lt;dbl&gt;</code></pre>
<p>Se as observações apresentam distribuição simétrica, <span class="math inline">\(G_1= 0\)</span>, ou próximas a <span class="math inline">\(0\)</span>.</p>
<p>O coeficiente de assimetria é o indicativo mais comum de Normalidade. Em dados assimétricos, existem dúvidas sobre qual medida de tendência central devemos utilizar para resumir os dados. Nesses casos, comparações entre médias de diferentes conjuntos de observações são não confiáveis, uma vez que a variância pode diferir substancialmente de um conjunto de observações para outro.</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb414-1" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb414-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb414-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>P,<span class="at">y=</span>..density..)) <span class="sc">+</span> </span>
<span id="cb414-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb414-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">30</span>, <span class="at">color=</span><span class="st">&quot;black&quot;</span>, <span class="at">fill=</span><span class="st">&quot;white&quot;</span>)<span class="sc">+</span></span>
<span id="cb414-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb414-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>SUP, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)<span class="sc">+</span></span>
<span id="cb414-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb414-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span><span class="fl">0.1</span>,<span class="at">fill=</span><span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="r_data_science_fcav_files/figure-html/unnamed-chunk-208-1.png" width="672" /></p>
<p><strong>Curtose</strong> - Indica o grau de achatamento de uma distribuição, é a medida do peso das caudas da distribuição. Se as observações seguem uma distribuição normal, então o coeficiente de curtose é zero, e sua estimativa é dado por:</p>
<p><span class="math display">\[
G_2 = \frac{\frac{\sum{i=1}^n(x-\bar{x})^4}{s^4}}{(n-3)(n-2)(n-1)}-3 \cdot \frac{(n-1)^2}{(n-2)(n-3)}
\]</span></p>
<p>Vamos utilizar a função <code>kurtosis()</code> do pacote <code>agricolae</code> para calcular o coeficente de assimetria.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para P</span></span>
<span id="cb415-2"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-2" aria-hidden="true" tabindex="-1"></a>geomorfologia <span class="sc">%&gt;%</span> </span>
<span id="cb415-3"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SUP) <span class="sc">%&gt;%</span> </span>
<span id="cb415-4"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Media =</span> <span class="fu">mean</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-5"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mediana =</span> <span class="fu">median</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-6"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">DP=</span><span class="fu">sd</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-7"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">IQR=</span><span class="fu">IQR</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-8"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">DA_mediano =</span> <span class="fu">mad</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-9"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-9" aria-hidden="true" tabindex="-1"></a>            Mínimo <span class="ot">=</span> <span class="fu">min</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-10"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q1 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-11"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">Q3 =</span> <span class="fu">quantile</span>(P, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-12"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-12" aria-hidden="true" tabindex="-1"></a>            Máximo <span class="ot">=</span> <span class="fu">max</span>(P, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb415-13"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">N=</span><span class="fu">n</span>(),</span>
<span id="cb415-14"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">N_na =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(P)),</span>
<span id="cb415-15"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10=</span><span class="fu">sum</span>(P<span class="sc">&lt;</span><span class="dv">10</span>),</span>
<span id="cb415-16"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">n10p=</span><span class="fu">mean</span>(P<span class="sc">&lt;</span><span class="dv">10</span>),</span>
<span id="cb415-17"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">G1 =</span> agricolae<span class="sc">::</span><span class="fu">skewness</span>(P),</span>
<span id="cb415-18"><a href="manipulação-de-dados-com-o-dplyr.html#cb415-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">G2 =</span> agricolae<span class="sc">::</span><span class="fu">kurtosis</span>(P)) </span></code></pre></div>
<pre><code>## # A tibble: 3 x 16
##   SUP   Media Mediana    DP   IQR DA_mediano Mínimo    Q1    Q3 Máximo     N
## * &lt;chr&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 I      17.8    12    13.2  19        11.9       4     6  25       42    17
## 2 II     34.9    12.5  47.5  39.5      15.6       2     4  43.5    209    62
## 3 III    14.0     9    14.7  10         7.41      3     4  14       56    27
## # ... with 5 more variables: N_na &lt;int&gt;, n10 &lt;int&gt;, n10p &lt;dbl&gt;, G1 &lt;dbl&gt;,
## #   G2 &lt;dbl&gt;</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualização-de-dados-com-o-ggplot2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="análise-exploratória-de-dados-aed.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r_data_science_fcav.pdf", "r_data_science_fcav.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
